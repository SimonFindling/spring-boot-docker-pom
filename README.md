#Spring Boot Docker Plugin Parent POM
A Spring Boot 2.0.0.BUILD-SNAPSHOT Parent POM with fabric8 maven-docker-plugin. 
With the Docker Plugin you can create a runtime container for your spring boot application.
##Maven Properties
You can override some properties in your child POM to change versions of Spring Boot and
maven-docker-plugin. These are the rewritable properties:

Property | Description
---------|------------
project.build.source.encoding | By Default UTF-8.
project.reporting.outputEncoding | By Default UTF-8.
java.version | The used java version. By default 1.8.
spring.boot.version | The version of Spring Boot. By Default 2.0.0.BUILD-SNAPSHOT.
fabric8.docker.version | The version of the fabric8 docker-maven-plugin.
docker.container.name | The name of the created docker container. By default `%g/%a:%t`, what stands for `groupId-last-part/artifactId:version+timestamp`.
docker.port | The exposed port of the application. By default `8080`.
docker.base.image | The underlying docker image. By default `openjdk:8-alpine`.
docker.volume | The shared volume of the container. Optionally, by default `/tmp`.
## Spring Boot Starter
The POM uses the spring-boot-starter-parent as parent POM. 
It uses the build snapshoot `2.0.0.BUILD-SNAPSHOT`.
See [Spring Boot 2.0.0 Reference](http://docs.spring.io/spring-boot/docs/2.0.0.BUILD-SNAPSHOT/reference/htmlsingle/#using-boot-maven)
for more information.
## Fabric8.io docker-maven.plugin
The plugin creates a Docker container with a
java runtime and a running Spring Boot application.
###Naming
The container is named after the last part of the groupId
followed by a slash and the artifactId. 
The version contains the maven project version followed by the current timestamp.
for groupId `de.fisi1017` and artifactId `sample-application` and version `1.0-SNAPSHOT` the
image name will be `fisi1017/sample-application:1.0-SNAPSHOT-<timestamp>`.
A alternative version tag is `latest` which results in `fisi1017/sample-application:latest`. 
### Base Image
The base image is the alpine version of the OpenJDK. The Java Version is 1.8. The image can be found here
[OpenJDK Docker image](https://hub.docker.com/_/openjdk/). The image name is `openjdk:8-alpine`. 
The base image can be changed by setting the `docker.base.image` property.
### Port
The default port for Spring Boot applications is `8080`, you can change the port exposing of docker by setting
the `docker.port` property. To change the port of the Spring Boot application edit your `application.properties` 
respectively `application.yml` file. You need to set the `server.port` property there.
### Volume
By default the path `/tmp` can be shared with the docker host. you can change the shared volume by changing
the `docker.volume` property. By default nothing is written in the shared volume.
### Entry Point
The entry point of the docker container is the command `java -Djava.security.egd=file:/dev/./urandom -jar app.jar`.
### Used JAR
The used jar for the container is the jar, that is generated by `maven package`. Therefore the maven-assembly-plugin
is used.
### Generated Dockerfile
The image is created through maven configuration. Therefore no dockerfile is needed. But after creation
a dockerfile is created in the `/target` directory of your project. The file will look like this:
```
FROM openjdk:8-alpine
COPY maven /
RUN sh -c 'touch /app.jar'
VOLUME ["/tmp"]
ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]
```
### Maven Goals
The most important maven goals, used by the plugin are `docker:build` and `docker:push`. 
`docker:build` creates the docker image. Before calling `docker:build` it is recommended to call 
`package`. An example command could be:

```
mvn clean package docker:build
```
The `docker:push` goal pushs the image to a docker registry. By default the public Docker Hub registry
is used. The registry can be changed by setting the `docker.push.registry` property. An sample command could look like:
```
mvn clean package docker:build docker:push
```

### Further Information
For further information look at the [fabric8io/docker-maven-plugin Documentation](https://dmp.fabric8.io/).